package Database;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import meka.core.A;

import javax.swing.text.html.HTMLDocument;
import java.io.*;
import java.nio.charset.StandardCharsets;
import java.util.*;

public class PlaygrounJsonAffils {


    private static void recursiveGetAffils(final JsonNode node, Set<String> affils) {


        Iterator<Map.Entry<String, JsonNode>> fieldsIterator = node.fields();

        while (fieldsIterator.hasNext()) {
            Map.Entry<String, JsonNode> field = fieldsIterator.next();

            final String key = field.getKey();
            //System.out.println("Key: " + key);
            final JsonNode value = field.getValue();

            if (value.isContainerNode()) {


                Iterator<JsonNode> iter = value.elements();

                while (iter.hasNext()) {

                    recursiveGetAffils(iter.next(), affils); //recursion

                }


            } else {


                if ("name".equals(key)) {


                    System.out.println(value.textValue());

                    // System.out.println("key/Value: " + key + " " + value + " " + value.getNodeType());
                    affils.add(value.asText());
                }

            }
        }


    }

    private static void recursive(final JsonNode node, List<JsonNode> affils) {


        Iterator<Map.Entry<String, JsonNode>> fieldsIterator = node.fields();

        while (fieldsIterator.hasNext()) {
            Map.Entry<String, JsonNode> field = fieldsIterator.next();

            final String key = field.getKey();
            //  System.out.println("Key: " + key);
            if("hasAffiliation".equals(key)) affils.add( field.getValue() );

            final JsonNode value = field.getValue();

            if (value.isContainerNode()) {


                Iterator<JsonNode> iter = value.elements();

                while (iter.hasNext()) {

                    recursive( iter.next(), affils ); //recursion

                }


            } else {

                //not implemented here

            }
        }


    }


    private static Map<String, String> uriToName;

    // Instantiating the static map
    static
    {
        uriToName = new HashMap<>();
        uriToName.put("bth.se","Blekinge Tekniska Högskola");
        uriToName.put("chalmers.se","Chalmers tekniska högskola");
        uriToName.put("ths.se","Enskilda Högskolan Stockholm");
        uriToName.put("esh.se","Ersta Sköndal Bräcke högskola");
        uriToName.put("fhs.se","Försvarshögskolan");
        uriToName.put("gih.se","Gymnastik- och idrottshögskolan");
        uriToName.put("gu.se","Göteborgs universitet");
        uriToName.put("du.se","Högskolan Dalarna");
        uriToName.put("hb.se","Högskolan i Borås");
        uriToName.put("hig.se","Högskolan i Gävle");
        uriToName.put("hh.se","Högskolan i Halmstad");
        uriToName.put("his.se","Högskolan i Skövde");
        uriToName.put("hkr.se","Högskolan Kristianstad");
        uriToName.put("hv.se","Högskolan Väst");
        uriToName.put("hj.se","Jönköping University");
        uriToName.put("kau.se","Karlstads universitet");
        uriToName.put("ki.se","Karolinska institutet");
        uriToName.put("konstfack.se","Konstfack");
        uriToName.put("kkh.se","Kungl. Konsthögskolan");
        uriToName.put("kmh.se","Kungl. Musikhögskolan");
        uriToName.put("kth.se","Kungl. Tekniska högskolan");
        uriToName.put("liu.se","Linköpings universitet");
        uriToName.put("lnu.se","Linnéuniversitetet");
        uriToName.put("ltu.se","Luleå tekniska universitet");
        uriToName.put("lu.se","Lunds universitet");
        uriToName.put("mau.se","Malmö universitet");
       // uriToName.put("mah.se","Malmö universitet");
        uriToName.put("miun.se","Mittuniversitetet");
        uriToName.put("mdh.se","Mälardalens högskola");
        uriToName.put("nationalmuseum.se","Nationalmuseum");
        uriToName.put("nrm.se","Naturhistoriska riksmuseet");
        uriToName.put("naturvardsverket.se","Naturvårdsverket");
        uriToName.put("nai.se","Nordiska Afrikainstitutet");
        uriToName.put("raa.se","Riksantikvarieämbetet");
        uriToName.put("ri.se","RISE Research Institutes of Sweden");
        uriToName.put("rkh.se","Röda Korsets Högskola");
        uriToName.put("shh.se","Sophiahemmet Högskola");
        uriToName.put("vti.se","Statens väg- och transportforskningsinstitut");
        uriToName.put("uniarts.se","Stockholms konstnärliga högskola");
        uriToName.put("su.se","Stockholms universitet");
        uriToName.put("slu.se","Sveriges lantbruksuniversitet");
        uriToName.put("sh.se","Södertörns högskola");
        uriToName.put("umu.se","Umeå universitet");
        uriToName.put("uu.se","Uppsala universitet");
        uriToName.put("oru.se","Örebro universitet");
      //  uriToName.put("lio.se","Östergötlands Läns Landsting");

    }

    public static String getContributingSwePubUnit(String uri) {

        return uriToName.get(uri);

    }

    public static void main(String[] arg) throws IOException {


        // String hej = "{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:lup.lub.lu.se:281cbd94-201a-42ec-8315-b54c0dbfab2a\",\"@type\":\"Instance\",\"extent\":{\"@type\":\"Extent\",\"label\":\"1 s.\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"https://lup.lub.lu.se/record/1690297\"}],\"instanceOf\":{\"@type\":\"Text\",\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Lindh\\u00e9\",\"givenName\":\"Anna\",\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"lu\"},\"value\":\"engl-ali\"}]},\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"lu.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Lunds universitet\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"lu.se\"},\"value\":\"v1000032\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Humanistiska och teologiska fakulteterna\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000032\"},\"value\":\"v1000041\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Institutioner\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000041\"},\"value\":\"v1000088\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Spr\\u00e5k- och litteraturcentrum\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000088\"},\"value\":\"v1000119\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Sektion 4\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000119\"},\"value\":\"v1000120\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Avdelningen f\\u00f6r engelska\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000120\"},\"value\":\"v1000121\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Engelska\"},{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"lu.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"name\":\"Lund University\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"lu.se\"},\"value\":\"v1000032\"}],\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"name\":\"Joint Faculties of Humanities and Theology\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000032\"},\"value\":\"v1000041\"}],\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"name\":\"Departments\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000041\"},\"value\":\"v1000088\"}],\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"name\":\"Centre for Languages and Literature\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000088\"},\"value\":\"v1000119\"}],\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"name\":\"Section 4\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000119\"},\"value\":\"v1000120\"}],\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"name\":\"Division of English Studies\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000120\"},\"value\":\"v1000121\"}],\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"name\":\"English Studies\"}],\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Sonesson\",\"givenName\":\"Anders\"},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/edt\"}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Amn\\u00e9r\",\"givenName\":\"Gunilla\"},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/edt\"}]}],\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/conference/paper\"},{\"@id\":\"https://id.kb.se/term/swepub/ConferencePaper\"}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"1\"},{\"@id\":\"https://id.kb.se/term/swepub/Published\",\"@type\":\"PublicationStatus\"}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"'You're one of us': N\\u00e5gra reflektioner kring att undervisa p\\u00e5 ett historiskt svart universitet i USA\"}],\"language\":[{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\",\"langCode\":\"swe\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"subject\":[{\"@type\":\"Topic\",\"prefLabel\":\"SoTL\"},{\"@id\":\"https://id.kb.se/term/uka/602\",\"@type\":\"Topic\",\"broader\":{\"prefLabel\":\"Humaniora och konst\"},\"code\":\"602\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"prefLabel\":\"Spr\\u00e5k och litteratur\"},{\"@id\":\"https://id.kb.se/term/uka/602\",\"@type\":\"Topic\",\"broader\":{\"prefLabel\":\"Humanities\"},\"code\":\"602\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Languages and Literature\"},{\"@id\":\"https://id.kb.se/term/uka/6\",\"@type\":\"Topic\",\"code\":\"6\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"prefLabel\":\"Humaniora och konst\"},{\"@id\":\"https://id.kb.se/term/uka/6\",\"@type\":\"Topic\",\"code\":\"6\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Humanities and the Arts\"}]},\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"lu\"},\"changeDate\":\"2018-11-21T21:09:13+01:00\",\"creationDate\":\"2016-04-04T12:08:23+02:00\"},\"partOf\":[{\"@type\":\"Work\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/event\"}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Lunds universitets utvecklingskonferens, 2009,Lund, Sweden,2009-09-24 - 2009-09-24\"}]},{\"@type\":\"Work\",\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"125-125\"}]},\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Proceedings Utvecklingskonferens Lunds universitet 2009\"}],\"identifiedBy\":[{\"@type\":\"ISBN\",\"value\":\"9789197797429\"}]}],\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"Lednings- och kompetensutveckling/CED\"},\"date\":\"2009\"}]}";

        // String hej2 = "{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:DiVA.org:umu-159084\",\"@type\":\"Instance\",\"carrierType\":{\"@type\":\"CarrierType\",\"label\":\"electronic\",\"source\":{\"@type\":\"Source\",\"code\":\"marcform\"}},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:umu:diva-159084\"},{\"@type\":\"DOI\",\"value\":\"https://doi.org/10.1007/s11192-019-03121-z\"},{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:kth:diva-255179\"},{\"@type\":\"ScopusID\",\"value\":\"2-s2.0-85066012563\"},{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:uu:diva-390087\"}],\"indirectlyIdentifiedBy\":[],\"instanceOf\":{\"@type\":\"Text\",\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Colliander\",\"givenName\":\"Cristian\",\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"umu\"},\"value\":\"crco0001\"},{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0002-7653-4004\"}],\"lifeSpan\":\"1980-\"},\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"umu.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Ume\\u00e5 universitet\"},{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"umu.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Ume\\u00e5 universitet\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"umu.se\"},\"value\":\"Sociologiska institutionen\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Sociologiska institutionen\"},{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"umu.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Ume\\u00e5 universitet\"},{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"umu.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Ume\\u00e5 universitet\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"umu.se\"},\"value\":\"Ume\\u00e5 universitetsbibliotek (UB)\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Ume\\u00e5 universitetsbibliotek (UB)\"},{\"@type\":\"Organization\",\"name\":\"Inforsk\"},{\"@type\":\"Organization\",\"name\":\"Umea Univ, Dept Sociol, Inforsk, Umea, Sweden.;Umea Univ, Univ Lib, Umea, Sweden.\"},{\"@type\":\"Organization\",\"name\":\"Umea Univ, Dept Sociol, Inforsk, Umea, Sweden;Umea Univ, Univ Lib, Umea, Sweden\"}],\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Ahlgren\",\"givenName\":\"Per\",\"identifiedBy\":[{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0003-0229-3073\"}]},\"hasAffiliation\":[{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"kth.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"KTH\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"kth.se\"},\"value\":\"Publiceringens infrastruktur\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Publiceringens infrastruktur\"},{\"@type\":\"Organization\",\"name\":\"Uppsala Univ, Dept Stat, Uppsala, Sweden.\"},{\"@type\":\"Organization\",\"name\":\"Department of Statistics, Uppsala University, Uppsala, Sweden\"},{\"@type\":\"Organization\",\"hasAffiliation\":[{\"@type\":\"Organization\",\"identifiedBy\":[{\"@type\":\"URI\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"},\"value\":\"uu.se\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Uppsala universitet\"}],\"identifiedBy\":[{\"@type\":\"Local\",\"source\":{\"@type\":\"Source\",\"code\":\"uu.se\"},\"value\":\"Statistiska institutionen\"}],\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"name\":\"Statistiska institutionen\"},{\"@type\":\"Organization\",\"name\":\"KTH Royal Inst Technol, KTH Lib, Stockholm, Sweden\"}],\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}]}],\"electronicLocator\":[{\"@type\":\"Resource\",\"uri\":\"https://doi.org/10.1007/s11192-019-03121-z\"},{\"@type\":\"Resource\",\"uri\":\"http://umu.diva-portal.org/smash/get/diva2:1316344/FULLTEXT01.pdf\"},{\"@type\":\"Resource\",\"uri\":\"http://uu.diva-portal.org/smash/get/diva2:1340381/FULLTEXT01.pdf\"}],\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/journal-article\"}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"2\"},{\"@id\":\"https://id.kb.se/term/swepub/Published\",\"@type\":\"PublicationStatus\"},{\"@type\":\"Note\",\"label\":\"QC 20190904\"}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Comparison of publication-level approaches to ex-post citation normalization\"}],\"language\":[{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\",\"langCode\":\"eng\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"subject\":[{\"@type\":\"Topic\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Algorithmically constructed classification system approach\"},{\"@type\":\"Topic\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Citation impact\"},{\"@type\":\"Topic\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Field normalization\"},{\"@type\":\"Topic\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Item-oriented approach\"},{\"@type\":\"Topic\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Research evaluation\"},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"broader\":{\"broader\":{\"prefLabel\":\"Social Sciences\"},\"prefLabel\":\"Media and Communications\"},\"code\":\"50805\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Information Studies\"},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"broader\":{\"broader\":{\"prefLabel\":\"Samh\\u00e4llsvetenskap\"},\"prefLabel\":\"Medie- och kommunikationsvetenskap\"},\"code\":\"50805\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"prefLabel\":\"Biblioteks- och informationsvetenskap\"},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"prefLabel\":\"Samh\\u00e4llsvetenskap\"},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"broader\":{\"prefLabel\":\"Samh\\u00e4llsvetenskap\"},\"code\":\"508\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"prefLabel\":\"Medie- och kommunikationsvetenskap\"},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Social Sciences\"},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"broader\":{\"prefLabel\":\"Social Sciences\"},\"code\":\"508\",\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"prefLabel\":\"Media and Communications\"}],\"summary\":[{\"@type\":\"Summary\",\"label\":\"In this paper, we compare two sophisticated publication-level approaches to ex-post citation normalization: an item-oriented approach and an approach falling under the general algorithmically constructed classification system approach. Using articles published in core journals in Web of Science (SCIE, SSCI & A&HCI) during 2009 (n=955,639), we first examine, using the measure Proportion explained variation (PEV), to what extent the publication-level approaches can explain and correct for variation in the citation distribution that stems from subject matter heterogeneity. We then, for the subset of articles from life science and biomedicine (n=456,045), gauge the fairness of the normalization approaches with respect to their ability to identify highly cited articles when subject area is factored out. This is done by utilizing information from publication-level MeSH classifications to create high quality subject matter baselines and by using the measure Deviations from expectations (DE). The results show that the item-oriented approach had the best performance regarding PEV. For DE, only the most fine-grained clustering solution could compete with the item-oriented approach. However, the item-oriented approach performed better when cited references were heavily weighted in the similarity calculations.\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"}}]},\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"umu\"},\"creationDate\":\"2019-05-17\"},\"partOf\":[{\"@type\":\"Work\",\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"283-300\"}]},\"hasTitle\":[{\"@type\":\"Title\",\"issueNumber\":\"1\",\"mainTitle\":\"Scientometrics\",\"volumeNumber\":\"120\"}],\"identifiedBy\":[{\"@type\":\"ISSN\",\"qualifier\":\"ISSN\",\"value\":\"0138-9130\"},{\"@type\":\"ISSN\",\"qualifier\":\"EISSN\",\"value\":\"1588-2861\"}]}],\"provisionActivity\":[],\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"Springer\"},\"date\":\"2019\"}],\"usageAndAccessPolicy\":[{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"},{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"}]}";

        String hej4 = "{\"master\":{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:gup.ub.gu.se/286557\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/journal-article\"},{\"@id\":\"https://id.kb.se/term/swepub/JournalArticle\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\",\"langCode\":\"eng\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"How (not) to measure democracy\"}],\"summary\":[{\"@type\":\"Summary\",\"label\":\"\\u00a9 The Author(s) 2019. Measures of democracy are regularly employed in the statistical analysis of economic, political, and social policy. This paper reviews the measures\\\" setup, strength, and weaknesses across the three most prominent democracy datasets: PolityIV, Freedom House, and Varieties of Democracy. The measures developed by the Varieties of Democracy project outperform Polity2 and Freedom House Index with respect to the underlying definition and measurement scale, as well as the theoretical justification of the aggregation procedure. The three indices display a high level of agreement for those observations included in all three datasets. The most substantial differences between the indices lie in the indices\\u2019 coverage, i.e. in their non-missing observations (in Polity2 coding, for example, years during which a country is occupied by foreign powers constitute missing values), the availability of disaggregate data and the above mentioned key areas. This paper clarifies when to proceed with caution, but for the most part advocates the use of Varieties of Democracy in the statistical analysis of democracy.\"}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"givenName\":\"Vanessa Alexandra\",\"familyName\":\"Boese\",\"identifiedBy\":[{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0002-1680-0745\"},{\"@type\":\"Local\",\"value\":\"xboesv\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Statsvetenskapliga institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"gu.se/1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"G\\u00f6teborgs universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"gu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Department of Political Science\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"gu.se/1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Gothenburg University\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"gu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Organization\",\"name\":\"G\\u00f6teborgs universitet, Samh\\u00e4llsvetenskapliga fakulteten , Statsvetenskapliga institutionen\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}]},\"role\":[]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Organization\",\"name\":\"Gothenburg University, Faculty of Social Sciences, Department of Political Science\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}]},\"role\":[]}],\"subject\":[{\"@type\":\"Topic\",\"prefLabel\":\"democracy\"},{\"@type\":\"Topic\",\"prefLabel\":\"Freedom House\"},{\"@type\":\"Topic\",\"prefLabel\":\"measurement of democracy\"},{\"@type\":\"Topic\",\"prefLabel\":\"Polity\"},{\"@type\":\"Topic\",\"prefLabel\":\"Varieties of Democracy (V-Dem)\"},{\"@id\":\"https://id.kb.se/term/uka/502\",\"@type\":\"Topic\",\"code\":\"502\",\"prefLabel\":\"Ekonomi och n\\u00e4ringsliv\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/502\",\"@type\":\"Topic\",\"code\":\"502\",\"prefLabel\":\"Economics and Business\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/506\",\"@type\":\"Topic\",\"code\":\"506\",\"prefLabel\":\"Statsvetenskap\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/506\",\"@type\":\"Topic\",\"code\":\"506\",\"prefLabel\":\"Political Science\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"1\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"https://gup.ub.gu.se/publication/286557\"},{\"@type\":\"DOI\",\"value\":\"https://doi.org/10.1177/2233865918815571\"},{\"@type\":\"ScopusID\",\"value\":\"85065715973\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"volumeNumber\":\"22\",\"mainTitle\":\"International Area Studies Review\"}],\"identifiedBy\":[{\"@type\":\"ISSN\",\"value\":\"2233-8659\"},{\"@type\":\"ISSN\",\"value\":\"2049-1123\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"95-127\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"gu\"}},\"provisionActivity\":[{\"@type\":\"Publication\",\"date\":\"2019\"}]},\"publications\":[{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:gup.ub.gu.se/286557\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/journal-article\"},{\"@id\":\"https://id.kb.se/term/swepub/JournalArticle\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\",\"langCode\":\"eng\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"How (not) to measure democracy\"}],\"summary\":[{\"@type\":\"Summary\",\"label\":\"\\u00a9 The Author(s) 2019. Measures of democracy are regularly employed in the statistical analysis of economic, political, and social policy. This paper reviews the measures\\\" setup, strength, and weaknesses across the three most prominent democracy datasets: PolityIV, Freedom House, and Varieties of Democracy. The measures developed by the Varieties of Democracy project outperform Polity2 and Freedom House Index with respect to the underlying definition and measurement scale, as well as the theoretical justification of the aggregation procedure. The three indices display a high level of agreement for those observations included in all three datasets. The most substantial differences between the indices lie in the indices\\u2019 coverage, i.e. in their non-missing observations (in Polity2 coding, for example, years during which a country is occupied by foreign powers constitute missing values), the availability of disaggregate data and the above mentioned key areas. This paper clarifies when to proceed with caution, but for the most part advocates the use of Varieties of Democracy in the statistical analysis of democracy.\"}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"givenName\":\"Vanessa Alexandra\",\"familyName\":\"Boese\",\"identifiedBy\":[{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0002-1680-0745\"},{\"@type\":\"Local\",\"value\":\"xboesv\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Statsvetenskapliga institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"gu.se/1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"G\\u00f6teborgs universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"gu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Department of Political Science\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"gu.se/1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Gothenburg University\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"gu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Organization\",\"name\":\"G\\u00f6teborgs universitet, Samh\\u00e4llsvetenskapliga fakulteten , Statsvetenskapliga institutionen\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}]},\"role\":[]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Organization\",\"name\":\"Gothenburg University, Faculty of Social Sciences, Department of Political Science\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"1309\",\"source\":{\"@type\":\"Source\",\"code\":\"gu.se\"}}]},\"role\":[]}],\"subject\":[{\"@type\":\"Topic\",\"prefLabel\":\"democracy\"},{\"@type\":\"Topic\",\"prefLabel\":\"Freedom House\"},{\"@type\":\"Topic\",\"prefLabel\":\"measurement of democracy\"},{\"@type\":\"Topic\",\"prefLabel\":\"Polity\"},{\"@type\":\"Topic\",\"prefLabel\":\"Varieties of Democracy (V-Dem)\"},{\"@id\":\"https://id.kb.se/term/uka/502\",\"@type\":\"Topic\",\"code\":\"502\",\"prefLabel\":\"Ekonomi och n\\u00e4ringsliv\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/502\",\"@type\":\"Topic\",\"code\":\"502\",\"prefLabel\":\"Economics and Business\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/506\",\"@type\":\"Topic\",\"code\":\"506\",\"prefLabel\":\"Statsvetenskap\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/506\",\"@type\":\"Topic\",\"code\":\"506\",\"prefLabel\":\"Political Science\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"1\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"https://gup.ub.gu.se/publication/286557\"},{\"@type\":\"DOI\",\"value\":\"https://doi.org/10.1177/2233865918815571\"},{\"@type\":\"ScopusID\",\"value\":\"85065715973\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"volumeNumber\":\"22\",\"mainTitle\":\"International Area Studies Review\"}],\"identifiedBy\":[{\"@type\":\"ISSN\",\"value\":\"2233-8659\"},{\"@type\":\"ISSN\",\"value\":\"2049-1123\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"95-127\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"gu\"}},\"provisionActivity\":[{\"@type\":\"Publication\",\"date\":\"2019\"}]}],\"publication_count\":1}";

        String hej5 = "{\"master\":{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:DiVA.org:umu-159084\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/journal-article\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\",\"langCode\":\"eng\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Comparison of publication-level approaches to ex-post citation normalization\"}],\"summary\":[{\"@type\":\"Summary\",\"label\":\"In this paper, we compare two sophisticated publication-level approaches to ex-post citation normalization: an item-oriented approach and an approach falling under the general algorithmically constructed classification system approach. Using articles published in core journals in Web of Science (SCIE, SSCI & A&HCI) during 2009 (n=955,639), we first examine, using the measure Proportion explained variation (PEV), to what extent the publication-level approaches can explain and correct for variation in the citation distribution that stems from subject matter heterogeneity. We then, for the subset of articles from life science and biomedicine (n=456,045), gauge the fairness of the normalization approaches with respect to their ability to identify highly cited articles when subject area is factored out. This is done by utilizing information from publication-level MeSH classifications to create high quality subject matter baselines and by using the measure Deviations from expectations (DE). The results show that the item-oriented approach had the best performance regarding PEV. For DE, only the most fine-grained clustering solution could compete with the item-oriented approach. However, the item-oriented approach performed better when cited references were heavily weighted in the similarity calculations.\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"}}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Colliander\",\"givenName\":\"Cristian\",\"lifeSpan\":\"1980-\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"crco0001\",\"source\":{\"@type\":\"Source\",\"code\":\"umu\"}},{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0002-7653-4004\"}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Sociologiska institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Sociologiska institutionen\",\"source\":{\"@type\":\"Source\",\"code\":\"umu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]},{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Umeå universitetsbibliotek (UB)\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Umeå universitetsbibliotek (UB)\",\"source\":{\"@type\":\"Source\",\"code\":\"umu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]},{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Inforsk\"},{\"@type\":\"Organization\",\"name\":\"Umea Univ, Dept Sociol, Inforsk, Umea, Sweden.;Umea Univ, Univ Lib, Umea, Sweden.\"},{\"@type\":\"Organization\",\"name\":\"Umea Univ, Dept Sociol, Inforsk, Umea, Sweden;Umea Univ, Univ Lib, Umea, Sweden\"}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Ahlgren\",\"givenName\":\"Per\",\"identifiedBy\":[{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0003-0229-3073\"}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Publiceringens infrastruktur\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Publiceringens infrastruktur\",\"source\":{\"@type\":\"Source\",\"code\":\"kth.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"KTH\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"kth.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Uppsala Univ, Dept Stat, Uppsala, Sweden.\"},{\"@type\":\"Organization\",\"name\":\"Department of Statistics, Uppsala University, Uppsala, Sweden\"},{\"@type\":\"Organization\",\"name\":\"Statistiska institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Statistiska institutionen\",\"source\":{\"@type\":\"Source\",\"code\":\"uu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Uppsala universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"uu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"KTH Royal Inst Technol, KTH Lib, Stockholm, Sweden\"}]}],\"subject\":[{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Algorithmically constructed classification system approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Citation impact\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Field normalization\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Item-oriented approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Research evaluation\"},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Information Studies\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Media and Communications\",\"broader\":{\"prefLabel\":\"Social Sciences\"}}},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Biblioteks- och informationsvetenskap\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Samhällsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Social Sciences\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Media and Communications\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Social Sciences\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"2\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"},{\"@type\":\"Note\",\"label\":\"QC 20190904\"}],\"electronicLocator\":[{\"@type\":\"Resource\",\"uri\":\"https://doi.org/10.1007/s11192-019-03121-z\"},{\"@type\":\"Resource\",\"uri\":\"http://umu.diva-portal.org/smash/get/diva2:1316344/FULLTEXT01.pdf\"},{\"@type\":\"Resource\",\"uri\":\"http://uu.diva-portal.org/smash/get/diva2:1340381/FULLTEXT01.pdf\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:umu:diva-159084\"},{\"@type\":\"DOI\",\"value\":\"https://doi.org/10.1007/s11192-019-03121-z\"},{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:kth:diva-255179\"},{\"@type\":\"ScopusID\",\"value\":\"2-s2.0-85066012563\"},{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:uu:diva-390087\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"volumeNumber\":\"120\",\"issueNumber\":\"1\",\"mainTitle\":\"Scientometrics\"}],\"identifiedBy\":[{\"@type\":\"ISSN\",\"value\":\"0138-9130\",\"qualifier\":\"ISSN\"},{\"@type\":\"ISSN\",\"value\":\"1588-2861\",\"qualifier\":\"EISSN\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"283-300\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"umu\"},\"creationDate\":\"2019-05-17\"},\"carrierType\":{\"@type\":\"CarrierType\",\"label\":\"electronic\",\"source\":{\"@type\":\"Source\",\"code\":\"marcform\"}},\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"Springer\"},\"date\":\"2019\"}],\"usageAndAccessPolicy\":[{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"},{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"}],\"indirectlyIdentifiedBy\":[],\"provisionActivity\":[]},\"publications\":[{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:DiVA.org:kth-255179\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/journal-article\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\",\"langCode\":\"eng\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Comparison of publication-level approaches to ex-post citation normalization\"}],\"summary\":[{\"@type\":\"Summary\",\"label\":\"In this paper, we compare two sophisticated publication-level approaches to ex-post citation normalization: an item-oriented approach and an approach falling under the general algorithmically constructed classification system approach. Using articles published in core journals in Web of Science (SCIE, SSCI & A&HCI) during 2009 (n=955,639), we first examine, using the measure Proportion explained variation (PEV), to what extent the publication-level approaches can explain and correct for variation in the citation distribution that stems from subject matter heterogeneity. We then, for the subset of articles from life science and biomedicine (n=456,045), gauge the fairness of the normalization approaches with respect to their ability to identify highly cited articles when subject area is factored out. This is done by utilizing information from publication-level MeSH classifications to create high quality subject matter baselines and by using the measure Deviations from expectations (DE). The results show that the item-oriented approach had the best performance regarding PEV. For DE, only the most fine-grained clustering solution could compete with the item-oriented approach. However, the item-oriented approach performed better when cited references were heavily weighted in the similarity calculations.\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"}}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Colliander\",\"givenName\":\"Cristian\"},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Umea Univ, Dept Sociol, Inforsk, Umea, Sweden.;Umea Univ, Univ Lib, Umea, Sweden.\"}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Ahlgren\",\"givenName\":\"Per\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"u1w3qpyp\",\"source\":{\"@type\":\"Source\",\"code\":\"kth\"}},{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0003-0229-3073\"}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Publiceringens infrastruktur\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Publiceringens infrastruktur\",\"source\":{\"@type\":\"Source\",\"code\":\"kth.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"KTH\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"kth.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Uppsala Univ, Dept Stat, Uppsala, Sweden.\"},{\"@type\":\"Organization\",\"name\":\"Department of Statistics, Uppsala University, Uppsala, Sweden\"},{\"@type\":\"Organization\",\"name\":\"Statistiska institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Statistiska institutionen\",\"source\":{\"@type\":\"Source\",\"code\":\"uu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Uppsala universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"uu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"KTH Royal Inst Technol, KTH Lib, Stockholm, Sweden\"}]}],\"subject\":[{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Algorithmically constructed classification system approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Citation impact\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Field normalization\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Item-oriented approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Research evaluation\"},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Information Studies\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Media and Communications\",\"broader\":{\"prefLabel\":\"Social Sciences\"}}},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Biblioteks- och informationsvetenskap\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Samhällsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Social Sciences\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Media and Communications\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Social Sciences\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"2\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"},{\"@type\":\"Note\",\"label\":\"QC 20190904\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:kth:diva-255179\"},{\"@type\":\"DOI\",\"value\":\"https://doi.org/10.1007/s11192-019-03121-z\"},{\"@type\":\"ScopusID\",\"value\":\"2-s2.0-85066012563\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"volumeNumber\":\"120\",\"issueNumber\":\"1\",\"mainTitle\":\"Scientometrics\"}],\"identifiedBy\":[{\"@type\":\"ISSN\",\"value\":\"0138-9130\",\"qualifier\":\"ISSN\"},{\"@type\":\"ISSN\",\"value\":\"1588-2861\",\"qualifier\":\"EISSN\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"283-300\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"kth\"},\"creationDate\":\"2019-09-04\"},\"carrierType\":{\"@type\":\"CarrierType\",\"label\":\"print\",\"source\":{\"@type\":\"Source\",\"code\":\"marcform\"}},\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"SPRINGER\"},\"date\":\"2019\"}]},{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:DiVA.org:umu-159084\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/journal-article\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\",\"langCode\":\"eng\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Comparison of publication-level approaches to ex-post citation normalization\"}],\"summary\":[{\"@type\":\"Summary\",\"label\":\"In this paper, we compare two sophisticated publication-level approaches to ex-post citation normalization: an item-oriented approach and an approach falling under the general algorithmically constructed classification system approach. Using articles published in core journals in Web of Science (SCIE, SSCI & A&HCI) during 2009 (n=955,639), we first examine, using the measure Proportion explained variation (PEV), to what extent the publication-level approaches can explain and correct for variation in the citation distribution that stems from subject matter heterogeneity. We then, for the subset of articles from life science and biomedicine (n=456,045), gauge the fairness of the normalization approaches with respect to their ability to identify highly cited articles when subject area is factored out. This is done by utilizing information from publication-level MeSH classifications to create high quality subject matter baselines and by using the measure Deviations from expectations (DE). The results show that the item-oriented approach had the best performance regarding PEV. For DE, only the most fine-grained clustering solution could compete with the item-oriented approach. However, the item-oriented approach performed better when cited references were heavily weighted in the similarity calculations.\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"}}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Colliander\",\"givenName\":\"Cristian\",\"lifeSpan\":\"1980-\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"crco0001\",\"source\":{\"@type\":\"Source\",\"code\":\"umu\"}},{\"@type\":\"ORCID\",\"value\":\"https://orcid.org/0000-0002-7653-4004\"}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Sociologiska institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Sociologiska institutionen\",\"source\":{\"@type\":\"Source\",\"code\":\"umu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]},{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Umeå universitetsbibliotek (UB)\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Umeå universitetsbibliotek (UB)\",\"source\":{\"@type\":\"Source\",\"code\":\"umu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]},{\"@type\":\"Organization\",\"name\":\"Umeå universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"umu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"Inforsk\"}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Ahlgren\",\"givenName\":\"Per\"},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Department of Statistics, Uppsala University, Uppsala, Sweden\"}]}],\"subject\":[{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Algorithmically constructed classification system approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Citation impact\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Field normalization\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Item-oriented approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Research evaluation\"},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Information Studies\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Media and Communications\",\"broader\":{\"prefLabel\":\"Social Sciences\"}}},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Biblioteks- och informationsvetenskap\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Samhällsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Social Sciences\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Media and Communications\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Social Sciences\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"2\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"}],\"electronicLocator\":[{\"@type\":\"Resource\",\"uri\":\"https://doi.org/10.1007/s11192-019-03121-z\"},{\"@type\":\"Resource\",\"uri\":\"http://umu.diva-portal.org/smash/get/diva2:1316344/FULLTEXT01.pdf\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:umu:diva-159084\"},{\"@type\":\"DOI\",\"value\":\"https://doi.org/10.1007/s11192-019-03121-z\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"volumeNumber\":\"120\",\"issueNumber\":\"1\",\"mainTitle\":\"Scientometrics\"}],\"identifiedBy\":[{\"@type\":\"ISSN\",\"value\":\"0138-9130\",\"qualifier\":\"ISSN\"},{\"@type\":\"ISSN\",\"value\":\"1588-2861\",\"qualifier\":\"EISSN\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"283-300\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"umu\"},\"creationDate\":\"2019-05-17\"},\"carrierType\":{\"@type\":\"CarrierType\",\"label\":\"electronic\",\"source\":{\"@type\":\"Source\",\"code\":\"marcform\"}},\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"Springer\"},\"date\":\"2019\"}],\"usageAndAccessPolicy\":[{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"},{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"}]},{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:DiVA.org:uu-390087\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/ref\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/journal-article\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\",\"langCode\":\"eng\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Comparison of publication-level approaches to ex-post citation normalization\"}],\"summary\":[{\"@type\":\"Summary\",\"label\":\"In this paper, we compare two sophisticated publication-level approaches to ex-post citation normalization: an item-oriented approach and an approach falling under the general algorithmically constructed classification system approach. Using articles published in core journals in Web of Science (SCIE, SSCI & A&HCI) during 2009 (n=955,639), we first examine, using the measure Proportion explained variation (PEV), to what extent the publication-level approaches can explain and correct for variation in the citation distribution that stems from subject matter heterogeneity. We then, for the subset of articles from life science and biomedicine (n=456,045), gauge the fairness of the normalization approaches with respect to their ability to identify highly cited articles when subject area is factored out. This is done by utilizing information from publication-level MeSH classifications to create high quality subject matter baselines and by using the measure Deviations from expectations (DE). The results show that the item-oriented approach had the best performance regarding PEV. For DE, only the most fine-grained clustering solution could compete with the item-oriented approach. However, the item-oriented approach performed better when cited references were heavily weighted in the similarity calculations.\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"}}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Colliander\",\"givenName\":\"Cristian\"},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Umea Univ, Dept Sociol, Inforsk, Umea, Sweden;Umea Univ, Univ Lib, Umea, Sweden\"}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"familyName\":\"Ahlgren\",\"givenName\":\"Per\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"perah342\",\"source\":{\"@type\":\"Source\",\"code\":\"uu\"}}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Statistiska institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"Statistiska institutionen\",\"source\":{\"@type\":\"Source\",\"code\":\"uu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Uppsala universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"uu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]},{\"@type\":\"Organization\",\"name\":\"KTH Royal Inst Technol, KTH Lib, Stockholm, Sweden\"}]}],\"subject\":[{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Algorithmically constructed classification system approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Citation impact\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Field normalization\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Item-oriented approach\"},{\"@type\":\"Topic\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"prefLabel\":\"Research evaluation\"},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Information Studies\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Media and Communications\",\"broader\":{\"prefLabel\":\"Social Sciences\"}}},{\"@id\":\"https://id.kb.se/term/uka/50805\",\"@type\":\"Topic\",\"code\":\"50805\",\"prefLabel\":\"Biblioteks- och informationsvetenskap\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Samhällsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Medie- och kommunikationsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Samhällsvetenskap\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Social Sciences\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/508\",\"@type\":\"Topic\",\"code\":\"508\",\"prefLabel\":\"Media and Communications\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Social Sciences\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"2\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"}],\"electronicLocator\":[{\"@type\":\"Resource\",\"uri\":\"https://doi.org/10.1007/s11192-019-03121-z\"},{\"@type\":\"Resource\",\"uri\":\"http://uu.diva-portal.org/smash/get/diva2:1340381/FULLTEXT01.pdf\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"http://urn.kb.se/resolve?urn=urn:nbn:se:uu:diva-390087\"},{\"@type\":\"DOI\",\"value\":\"https://doi.org/10.1007/s11192-019-03121-z\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"volumeNumber\":\"120\",\"issueNumber\":\"1\",\"mainTitle\":\"Scientometrics\"}],\"identifiedBy\":[{\"@type\":\"ISSN\",\"value\":\"0138-9130\",\"qualifier\":\"ISSN\"},{\"@type\":\"ISSN\",\"value\":\"1588-2861\",\"qualifier\":\"EISSN\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"283-300\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"uu\"},\"creationDate\":\"2019-08-05\"},\"carrierType\":{\"@type\":\"CarrierType\",\"label\":\"electronic\",\"source\":{\"@type\":\"Source\",\"code\":\"marcform\"}},\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"SPRINGER\"},\"date\":\"2019\"}],\"usageAndAccessPolicy\":[{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"},{\"@type\":\"AccessPolicy\",\"label\":\"gratis\"}]}],\"publication_count\":3}";

        String hej6 ="{\"master\":{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:lup.lub.lu.se:d26ce7bf-7df3-426d-b255-5ca5694301af\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/vet\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/book-chapter\"},{\"@id\":\"https://id.kb.se/term/swepub/BookChapter\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/ger\",\"code\":\"ger\",\"langCode\":\"ger\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Habermas in Schweden: Eine Rezeption mit Hindernissen\"},{\"@type\":\"VariantTitle\",\"mainTitle\":\"Habermas i Sverige: En reception med f\\u00f6rhinder\"}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"givenName\":\"Carl-G\\u00f6ran\",\"familyName\":\"Heidegren\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"soc-che\",\"source\":{\"@type\":\"Source\",\"code\":\"lu\"}}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Sociologi\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000692\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000689\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Sociologiska institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000689\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000675\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Samh\\u00e4llsvetenskapliga institutioner och centrumbildningar\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000675\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000670\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Samh\\u00e4llsvetenskapliga fakulteten\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000670\",\"source\":{\"@type\":\"Source\",\"code\":\"lu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Lunds universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"lu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]}]}]}]},{\"@type\":\"Organization\",\"name\":\"Sociology\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000692\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000689\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Department of Sociology\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000689\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000675\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Departments of Administrative, Economic and Social Sciences\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000675\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000670\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Faculty of Social Sciences\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000670\",\"source\":{\"@type\":\"Source\",\"code\":\"lu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Lund University\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"lu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]}]}]}]}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"givenName\":\"Mikael\",\"familyName\":\"Carleheden\"},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"University of Copenhagen\"}]}],\"subject\":[{\"@id\":\"https://id.kb.se/term/uka/504\",\"@type\":\"Topic\",\"code\":\"504\",\"prefLabel\":\"Sociologi\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Samh\\u00e4llsvetenskap\"}},{\"@id\":\"https://id.kb.se/term/uka/504\",\"@type\":\"Topic\",\"code\":\"504\",\"prefLabel\":\"Sociology\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Social Sciences\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Samh\\u00e4llsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Social Sciences\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"2\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"https://lup.lub.lu.se/record/d26ce7bf-7df3-426d-b255-5ca5694301af\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Habermas global : Wirkungsgeschichte eines Werks - Wirkungsgeschichte eines Werks\",\"subtitle\":\"Wirkungsgeschichte eines Werks\"}],\"identifiedBy\":[{\"@type\":\"ISBN\",\"value\":\"9783518298794\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"459-475\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"lu\"},\"creationDate\":\"2020-03-20T11:18:05+01:00\",\"changeDate\":\"2021-02-18T13:55:46+01:00\"},\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"Suhrkamp\"},\"date\":\"2019\"}]},\"publications\":[{\"@context\":\"https://id.kb.se/context.jsonld\",\"@id\":\"oai:lup.lub.lu.se:d26ce7bf-7df3-426d-b255-5ca5694301af\",\"@type\":\"Instance\",\"instanceOf\":{\"@type\":\"Text\",\"genreForm\":[{\"@id\":\"https://id.kb.se/term/swepub/svep/vet\"},{\"@id\":\"https://id.kb.se/term/swepub/publication/book-chapter\"},{\"@id\":\"https://id.kb.se/term/swepub/BookChapter\"}],\"language\":[{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/ger\",\"code\":\"ger\",\"langCode\":\"ger\",\"source\":{\"@type\":\"Source\",\"code\":\"iso639-2b\"}}],\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Habermas in Schweden: Eine Rezeption mit Hindernissen\"},{\"@type\":\"VariantTitle\",\"mainTitle\":\"Habermas i Sverige: En reception med f\\u00f6rhinder\"}],\"contribution\":[{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"givenName\":\"Carl-G\\u00f6ran\",\"familyName\":\"Heidegren\",\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"soc-che\",\"source\":{\"@type\":\"Source\",\"code\":\"lu\"}}]},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Sociologi\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000692\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000689\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Sociologiska institutionen\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000689\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000675\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Samh\\u00e4llsvetenskapliga institutioner och centrumbildningar\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000675\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000670\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Samh\\u00e4llsvetenskapliga fakulteten\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000670\",\"source\":{\"@type\":\"Source\",\"code\":\"lu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Lunds universitet\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"lu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]}]}]}]},{\"@type\":\"Organization\",\"name\":\"Sociology\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000692\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000689\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Department of Sociology\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000689\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000675\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Departments of Administrative, Economic and Social Sciences\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000675\",\"source\":{\"@type\":\"Source\",\"code\":\"v1000670\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Faculty of Social Sciences\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"Local\",\"value\":\"v1000670\",\"source\":{\"@type\":\"Source\",\"code\":\"lu.se\"}}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"Lund University\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"lu.se\",\"source\":{\"@type\":\"Source\",\"code\":\"kb.se\"}}]}]}]}]}]}]},{\"@type\":\"Contribution\",\"agent\":{\"@type\":\"Person\",\"givenName\":\"Mikael\",\"familyName\":\"Carleheden\"},\"role\":[{\"@id\":\"http://id.loc.gov/vocabulary/relators/aut\"}],\"hasAffiliation\":[{\"@type\":\"Organization\",\"name\":\"University of Copenhagen\"}]}],\"subject\":[{\"@id\":\"https://id.kb.se/term/uka/504\",\"@type\":\"Topic\",\"code\":\"504\",\"prefLabel\":\"Sociologi\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/swe\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Samh\\u00e4llsvetenskap\"}},{\"@id\":\"https://id.kb.se/term/uka/504\",\"@type\":\"Topic\",\"code\":\"504\",\"prefLabel\":\"Sociology\",\"language\":{\"@type\":\"Language\",\"@id\":\"https://id.kb.se/language/eng\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"},\"broader\":{\"prefLabel\":\"Social Sciences\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Samh\\u00e4llsvetenskap\",\"language\":{\"@id\":\"https://id.kb.se/language/swe\",\"@type\":\"Language\",\"code\":\"swe\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}},{\"@id\":\"https://id.kb.se/term/uka/5\",\"@type\":\"Topic\",\"code\":\"5\",\"prefLabel\":\"Social Sciences\",\"language\":{\"@id\":\"https://id.kb.se/language/eng\",\"@type\":\"Language\",\"code\":\"eng\"},\"inScheme\":{\"@id\":\"https://id.kb.se/term/uka/\",\"@type\":\"ConceptScheme\",\"code\":\"uka.se\"}}],\"hasNote\":[{\"@type\":\"CreatorCount\",\"label\":\"2\"},{\"@type\":\"PublicationStatus\",\"@id\":\"https://id.kb.se/term/swepub/Published\"}]},\"identifiedBy\":[{\"@type\":\"URI\",\"value\":\"https://lup.lub.lu.se/record/d26ce7bf-7df3-426d-b255-5ca5694301af\"}],\"partOf\":[{\"@type\":\"Work\",\"hasTitle\":[{\"@type\":\"Title\",\"mainTitle\":\"Habermas global : Wirkungsgeschichte eines Werks - Wirkungsgeschichte eines Werks\",\"subtitle\":\"Wirkungsgeschichte eines Werks\"}],\"identifiedBy\":[{\"@type\":\"ISBN\",\"value\":\"9783518298794\"}],\"hasInstance\":{\"@type\":\"Instance\",\"extent\":[{\"@type\":\"Extent\",\"label\":\"459-475\"}]}}],\"meta\":{\"@type\":\"AdminMetadata\",\"assigner\":{\"@type\":\"Agent\",\"label\":\"lu\"},\"creationDate\":\"2020-03-20T11:18:05+01:00\",\"changeDate\":\"2021-02-18T13:55:46+01:00\"},\"publication\":[{\"@type\":\"Publication\",\"agent\":{\"@type\":\"Agent\",\"label\":\"Suhrkamp\"},\"date\":\"2019\"}]}],\"publication_count\":1}";


       BufferedReader reader = new BufferedReader(  new InputStreamReader( new FileInputStream("/Users/cristian/Desktop/JSON_SWEPUB/swepub-deduplicated-2021-02-21.jsonl"), StandardCharsets.UTF_8));
       BufferedWriter writer = new BufferedWriter( new FileWriter("/Users/cristian/Desktop/JSON_SWEPUB/affilsPerID.txt") );
       // BufferedReader reader = new BufferedReader(  new StringReader(hej6) );

        HashMap<String,Integer> countControlledAffils = new HashMap<>();

        ObjectMapper mapper = new ObjectMapper();
        String jline;
        while( (jline = reader.readLine()) != null ) {

            JsonNode root = null;

            try {
                root = mapper.readTree(jline);
            } catch (JsonProcessingException e) {
                e.printStackTrace();
            }
            if (root == null) continue;

            JsonNode master = root.get("master"); //the master record in case of duplicates. Secondary records in publications[] but hey are of no interest here. No particular order is implied in publications[].
            String id = master.get("@id").textValue();


            JsonNode contrib = master.get("instanceOf").get("contribution");   //array

            List<JsonNode> affilCollector = new ArrayList();
            for (JsonNode contributionObject : contrib) {

                JsonNode agent = contributionObject.get("agent");
                //process only persons and their affiliations
                if (!"Person".equals(agent.get("@type").textValue())) continue;
                //todo process agent object w r t name and local id and OIRCID

                //no affiliation information at all
                if( !contributionObject.has("hasAffiliation") ) continue; //System.out.println("No affiliation information for a person: " + id );

                //now get affiliations controlled or "external" to swepub contributors
                //array of objects, Note that hasAffiliations can be an object recursively!
                recursive(contributionObject,affilCollector);


            } //for each contributor



           // System.out.println(id +"\t" +affilCollector.size()  );

            HashSet<String> authorizedAffils = new HashSet<>();

            for(JsonNode jsonArray : affilCollector) {

                    for(JsonNode jsonObject : jsonArray) {


                        //perhaps just id for country etc

                        JsonNode type = jsonObject.get("@type");
                        JsonNode auth = jsonObject.get("identifiedBy");

                        if ( type != null && auth != null && "Organization".equals(type.textValue())) {

                            //debug
                            if(auth.size() != 1) {System.out.println("Auth array != 0, : " + id); System.exit(0); }

                            JsonNode authType = auth.get(0).get("@type");
                            if(authType != null && "URI".equals( authType.textValue() )) authorizedAffils.add( auth.get(0).get("value").textValue() );

                        }


                    } //for earch object

            } //for hasAffiliation array


          writer.write(id + "\t" + authorizedAffils +"\t" + authorizedAffils.size());
            writer.newLine();
            //statistics

            for(String s : authorizedAffils) {

                Integer count = countControlledAffils.get(s);

                if(count == null) {

                    countControlledAffils.put(s,1);
                } else {

                    countControlledAffils.put(s, count+1);
                }

            }

        } //for each json line


        reader.close();

        //print statistics

        for(Map.Entry<String,Integer> entry : countControlledAffils.entrySet()) {

            System.out.println(entry.getKey() +"\t" + entry.getValue());
        }



        writer.flush();
        writer.close();
    } //end of main

}//end of class

